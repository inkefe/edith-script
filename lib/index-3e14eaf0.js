function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function e(t,r){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,r)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=navigator.userAgent,i=document.referrer,a=function(){return(new Date).getTime()},s=function(){return(""+a()*Math.random()).slice(0,8)},u=function(){return~~performance.now()},c=function(t){window.dispatchEvent(new CustomEvent(t,{detail:{target:this,time:a()}}))},l=function(t){return"function"==typeof t},f=function t(e){if(""!==e.id)return'//*[@id="'+e.id+'"]';if(e==document.body)return"/html/"+e.tagName.toLowerCase();for(var r=1,n=e.parentNode.childNodes,o=0,i=n.length;o<i;o++){var a=n[o];if(a==e)return t(e.parentNode)+"/"+e.tagName.toLowerCase()+"["+r+"]";1==a.nodeType&&a.tagName==e.tagName&&r++}},h=function(t,e){if(void 0===e&&(e=200),(t="string"==typeof t?t:JSON.stringify(t))&&t.length>e){var r=Math.max(e-100,50);t=t.substr(0,r)+"... ..."+t.substr(r-e+50)}return t||""},p=function(t){return t.replace(/^[^/]*:?\/\//,"").split("?")[0]},d=function(t,e){return t.some((function(t){return t instanceof RegExp?t.test(e):"string"==typeof t?p(t)===p(e):void 0}))};var v=function(){var t=navigator.userAgent.toLowerCase();return(t.indexOf("msie")>-1?t.match(/msie ([\d.]+)/)[1]:100)<=8},m=function(t){return t?t===document?"html":t.tagName?t.tagName:t.outerHTML.match(/<([^>\s]+)/)[1]:""},g=function(t){var e,r=t.error||{};return{type:t._type||t.type,name:null==(e=t.name||t.message&&t.message.split(":")[0]||t.type)?void 0:e.replace(/^Uncaught\s/,""),message:h(t.message||t.description||"",300),extraInfo:t.extraInfo||null,stacktrace:t.error&&r.stack,target:t._target,timeStamp:u(),title:document.title,referrer:i,url:location.href,userAgent:o,columnNumber:t.colno||r.columnNumber,lineNumber:t.lineno||r.lineNumber,cookie:document.cookie,version:"0.4.6"}},y=Uint8Array,w=Uint16Array,b=Uint32Array,E=new y([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S=new y([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),k=new y([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=function(t,e){for(var r=new w(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];var o=new b(r[30]);for(n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},C=T(E,2),x=C[0],j=C[1];x[28]=258,j[258]=28;for(var N=T(S,0)[1],L=new w(32768),_=0;_<32768;++_){var M=(43690&_)>>>1|(21845&_)<<1;M=(61680&(M=(52428&M)>>>2|(13107&M)<<2))>>>4|(3855&M)<<4,L[_]=((65280&M)>>>8|(255&M)<<8)>>>1}var P=function(t,e,r){for(var n=t.length,o=0,i=new w(e);o<n;++o)++i[t[o]-1];var a,s=new w(e);for(o=0;o<e;++o)s[o]=s[o-1]+i[o-1]<<1;if(r){a=new w(1<<e);var u=15-e;for(o=0;o<n;++o)if(t[o])for(var c=o<<4|t[o],l=e-t[o],f=s[t[o]-1]++<<l,h=f|(1<<l)-1;f<=h;++f)a[L[f]>>>u]=c}else for(a=new w(n),o=0;o<n;++o)a[o]=L[s[t[o]-1]++]>>>15-t[o];return a},O=new y(288);for(_=0;_<144;++_)O[_]=8;for(_=144;_<256;++_)O[_]=9;for(_=256;_<280;++_)O[_]=7;for(_=280;_<288;++_)O[_]=8;var A=new y(32);for(_=0;_<32;++_)A[_]=5;var I=P(O,9,0),H=P(A,5,0),$=function(t){return(t/8>>0)+(7&t&&1)},R=function(t,e,r){(null==e||e<0)&&(e=0),(null==r||r>t.length)&&(r=t.length);var n=new(t instanceof w?w:t instanceof b?b:y)(r-e);return n.set(t.subarray(e,r)),n},W=function(t,e,r){r<<=7&e;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},U=function(t,e,r){r<<=7&e;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},B=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var o=r.length,i=r.slice();if(!o)return[new y(0),0];if(1==o){var a=new y(r[0].s+1);return a[r[0].s]=1,[a,1]}r.sort((function(t,e){return t.f-e.f})),r.push({s:-1,f:25001});var s=r[0],u=r[1],c=0,l=1,f=2;for(r[0]={s:-1,f:s.f+u.f,l:s,r:u};l!=o-1;)s=r[r[c].f<r[f].f?c++:f++],u=r[c!=l&&r[c].f<r[f].f?c++:f++],r[l++]={s:-1,f:s.f+u.f,l:s,r:u};var h=i[0].s;for(n=1;n<o;++n)i[n].s>h&&(h=i[n].s);var p=new w(h+1),d=D(r[l-1],p,0);if(d>e){n=0;var v=0,m=d-e,g=1<<m;for(i.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));n<o;++n){var b=i[n].s;if(!(p[b]>e))break;v+=g-(1<<d-p[b]),p[b]=e}for(v>>>=m;v>0;){var E=i[n].s;p[E]<e?v-=1<<e-p[E]++-1:++n}for(;n>=0&&v;--n){var S=i[n].s;p[S]==e&&(--p[S],++v)}d=e}return[new y(p),d]},D=function(t,e,r){return-1==t.s?Math.max(D(t.l,e,r+1),D(t.r,e,r+1)):e[t.s]=r},F=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new w(++e),n=0,o=t[0],i=1,a=function(t){r[n++]=t},s=1;s<=e;++s)if(t[s]==o&&s!=e)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=t[s]}return[r.subarray(0,n),e]},K=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},J=function(t,e,r){var n=r.length,o=$(e+2);t[o]=255&n,t[o+1]=n>>>8,t[o+2]=255^t[o],t[o+3]=255^t[o+1];for(var i=0;i<n;++i)t[o+i+4]=r[i];return 8*(o+4+n)},G=function(t,e,r,n,o,i,a,s,u,c,l){W(e,l++,r),++o[256];for(var f=B(o,15),h=f[0],p=f[1],d=B(i,15),v=d[0],m=d[1],g=F(h),y=g[0],b=g[1],T=F(v),C=T[0],x=T[1],j=new w(19),N=0;N<y.length;++N)j[31&y[N]]++;for(N=0;N<C.length;++N)j[31&C[N]]++;for(var L=B(j,7),_=L[0],M=L[1],$=19;$>4&&!_[k[$-1]];--$);var R,D,G,q,X=c+5<<3,z=K(o,O)+K(i,A)+a,Q=K(o,h)+K(i,v)+a+14+3*$+K(j,_)+(2*j[16]+3*j[17]+7*j[18]);if(X<=z&&X<=Q)return J(e,l,t.subarray(u,u+c));if(W(e,l,1+(Q<z)),l+=2,Q<z){R=P(h,p,0),D=h,G=P(v,m,0),q=v;var V=P(_,M,0);W(e,l,b-257),W(e,l+5,x-1),W(e,l+10,$-4),l+=14;for(N=0;N<$;++N)W(e,l+3*N,_[k[N]]);l+=3*$;for(var Y=[y,C],Z=0;Z<2;++Z){var tt=Y[Z];for(N=0;N<tt.length;++N){var et=31&tt[N];W(e,l,V[et]),l+=_[et],et>15&&(W(e,l,tt[N]>>>5&127),l+=tt[N]>>>12)}}}else R=I,D=O,G=H,q=A;for(N=0;N<s;++N)if(n[N]>255){et=n[N]>>>18&31;U(e,l,R[et+257]),l+=D[et+257],et>7&&(W(e,l,n[N]>>>23&31),l+=E[et]);var rt=31&n[N];U(e,l,G[rt]),l+=q[rt],rt>3&&(U(e,l,n[N]>>>5&8191),l+=S[rt])}else U(e,l,R[n[N]]),l+=D[n[N]];return U(e,l,R[256]),l+D[256]},q=new b([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),X=new y(0),z=function(t,e,r,n,o){return function(t,e,r,n,o,i){var a=t.length,s=new y(n+a+5*(1+Math.floor(a/7e3))+o),u=s.subarray(n,s.length-o),c=0;if(!e||a<8)for(var l=0;l<=a;l+=65535){var f=l+65535;f<a?c=J(u,c,t.subarray(l,f)):(u[l]=i,c=J(u,c,t.subarray(l,a)))}else{for(var h=q[e-1],p=h>>>13,d=8191&h,v=(1<<r)-1,m=new w(32768),g=new w(v+1),k=Math.ceil(r/3),T=2*k,C=function(e){return(t[e]^t[e+1]<<k^t[e+2]<<T)&v},x=new b(25e3),L=new w(288),_=new w(32),M=0,P=0,O=(l=0,0),A=0,I=0;l<a;++l){var H=C(l),W=32767&l,U=g[H];if(m[W]=U,g[H]=W,A<=l){var B=a-l;if((M>7e3||O>24576)&&B>423){c=G(t,u,0,x,L,_,P,O,I,l-I,c),O=M=P=0,I=l;for(var D=0;D<286;++D)L[D]=0;for(D=0;D<30;++D)_[D]=0}var F=2,K=0,z=d,Q=W-U&32767;if(B>2&&H==C(l-Q))for(var V=Math.min(p,B)-1,Y=Math.min(32767,l),Z=Math.min(258,B);Q<=Y&&--z&&W!=U;){if(t[l+F]==t[l+F-Q]){for(var tt=0;tt<Z&&t[l+tt]==t[l+tt-Q];++tt);if(tt>F){if(F=tt,K=Q,tt>V)break;var et=Math.min(Q,tt-2),rt=0;for(D=0;D<et;++D){var nt=l-Q+D+32768&32767,ot=nt-m[nt]+32768&32767;ot>rt&&(rt=ot,U=nt)}}}Q+=(W=U)-(U=m[W])+32768&32767}if(K){x[O++]=268435456|j[F]<<18|N[K];var it=31&j[F],at=31&N[K];P+=E[it]+S[at],++L[257+it],++_[at],A=l+F,++M}else x[O++]=t[l],++L[t[l]]}}c=G(t,u,i,x,L,_,P,O,I,l-I,c),i||(c=J(u,c,X))}return R(s,0,n+$(c)+o)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,r,n,!o)};function Q(t,e){void 0===e&&(e={});var r=function(){var t=1,e=0;return{p:function(r){for(var n=t,o=e,i=r.length,a=0;a!=i;){for(var s=Math.min(a+5552,i);a<s;++a)o+=n+=r[a];n%=65521,o%=65521}t=n,e=o},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}}();r.p(t);var n=z(t,e,2,4);return function(t,e){var r=e.level,n=0==r?0:r<6?1:9==r?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)}(n,e),function(t,e,r){for(;r;++e)t[e]=r,r>>>=8}(n,n.length-4,r.d()),n}function V(t){return function(t,e){var r="";if(!e&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var n=0;n<t.length;){var o=t[n++];o<128||e?r+=String.fromCharCode(o):o<224?r+=String.fromCharCode((31&o)<<6|63&t[n++]):o<240?r+=String.fromCharCode((15&o)<<12|(63&t[n++])<<6|63&t[n++]):(o=((15&o)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}return r}(Q(function(t,e){var r=t.length;if(!e&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);for(var n=new y(t.length+(t.length>>>1)),o=0,i=function(t){n[o++]=t},a=0;a<r;++a){if(o+5>n.length){var s=new y(o+8+(r-a<<1));s.set(n),n=s}var u=t.charCodeAt(a);u<128||e?i(u):u<2048?(i(192|u>>>6),i(128|63&u)):u>55295&&u<57344?(i(240|(u=65536+(1047552&u)|1023&t.charCodeAt(++a))>>>18),i(128|u>>>12&63),i(128|u>>>6&63),i(128|63&u)):(i(224|u>>>12),i(128|u>>>6&63),i(128|63&u))}return R(n,0,o)}(t="string"==typeof t?t:JSON.stringify(t))),!0)}var Y="INIT",Z="WILL_MOUNT",tt="DID_MOUNT",et="CHECK_SELF",rt="INSTALL_PLUGIN",nt="LISTENING",ot="COLLECTING",it="SLEEP",at={breadcrumbs:function(){return import("./BreadcrumbsPlugin-0b1e39d8.js")},network:function(){return import("./NetworkCheckPlugin-bb9f9667.js")},redo:function(){return import("./RecordPlugin-d42c4457.js")}},st="//webcdn.inke.cn/edith.cn",ut=st.replace(/\/[^/]+$/,""),ct={breadcrumbs:{link:ut+"/plugins/BreadcrumbsPlugin.js",name:"BreadcrumbsPlugin"},network:{link:ut+"/plugins/NetworkCheckPlugin.js",name:"NetworkCheckPlugin"},redo:{link:ut+"/plugins/RecordPlugin.js",name:"RecordPlugin"}},lt={ajaxWhiteList:[/op-center\.cn\/v1\/monitor/,/\/sockjs-node\/info/],resourceWhiteList:[].concat(Object.keys(ct).map((function(t){return ct[t].link})),["//webcdn.inke.cn/edith.cn/hm.gif"])};navigator.userAgent.match(/[^(\s]+(\s\([^)]+\))?/g);var ft=function(t,e){return function(){try{"function"!=typeof t&&(t=function(){});for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.apply(this,n)}catch(t){console.warn("edith 内部报错",t),gt("EdithError",t,e)}}},ht=function(t,e,r){addEventListener?addEventListener(t,ft(e),r):window.attachEvent&&window.attachEvent("on"+t,ft(e))},pt=ft((function(t){var e={};for(var r in t){var n=t[r];e[r]=dt(n)>6291456?"[large size Edith Plugins Data]":n}return e}));function dt(t){return(t&&"object"==typeof t&&t instanceof Error?t.stack:t)||""}function vt(t){return t=V(dt(t))}var mt="";function gt(t,e,r){r&&r.apiKey&&(mt=r.apiKey),St({version:"0.4.6",format:"es",name:t,message:vt(e),scriptUrl:st,userAgent:navigator.userAgent,apiKey:mt})}var yt=null,wt={root:"/",setRoot:function(t){this.root=t},getRootByUrl:function(t){return(t=t.replace(/^http(s?):\/\//,"//")).match(/^\/\//)?"":this.root},get:function(t){var e=this;return function(r){void 0===r&&(r={}),yt=new XMLHttpRequest;var n=e.getRootByUrl(t);return function(t,e){return new Promise((function(r,n){t.onreadystatechange=ft((function(){if(4===t.readyState){var e=["","text"].indexOf(t.responseType)>=0?t.responseType:"no responseText";if(200===t.status){var o={};try{o=JSON.parse(e)}catch(t){o=e}r(o)}else t.status>399&&n(e)}})),e()}))}(yt,(function(){yt.open("GET",""+n+t+"?"+function(t,e){var r,n,o="";for(r in t)n=t[r],o+=r+"="+("function"==typeof e?e(n,r):n&&"object"==typeof n&&!Object.getPrototypeOf(n).slice?JSON.stringify(n):n)+"&";return o.slice(0,-1)}(r),!0),yt.send()}))}},post:function(t){var e=this;return function(r){void 0===r&&(r={}),yt=new XMLHttpRequest;var n=e.getRootByUrl(t);yt.open("POST",""+n+t,!0),yt.setRequestHeader("Content-type","application/json;charset=utf-8"),yt.send(JSON.stringify(r))}}};wt.setRoot("https://event-edith.op-center.cn");var bt=wt.post("/v1/monitor/add"),Et=wt.get("/v1/upload/test-img"),St=wt.post("/v1/monitor/script-add"),kt=["resourceWhiteList","ajaxWhiteList"],Tt=function(){function e(){var e=this;this.life="",this.plugins=[],this.state={plugins:{}},this.utils={compressData:vt,compressString:vt,measureBWSimple:Et,edithAddEventListener:ht},this.init=function(r){if(e.life)return console.warn("只需要初始化一次");if(!e._waitPromise(r)){var n=r||{},o=n.apiKey,i=n.silentDev;if(!r||!o)return console.warn("请传入项目的apiKey");e.$life(Y),e.setState({api_key:o}),i&&location.host.match(/^localhost|[\d.]+$/)&&(e.notListening=!0),e._willMount(r),e.initState=t({},e.state),e._didMount(e.state),e._checkSelf().then((function(){e.$life(rt),e._installPlugins(e).then((function(){e._collecting(),e.initState=t({},e.state)})),l(e.pluginInstalled)&&e.pluginInstalled(),e.$life(nt)})).catch(e._sleep.bind(e))}},this.setState=function(r,n){if(e.life!==ot||n){var o=e.state;e.state=t({},o,r)}},this.compilerCallback=function(r,n){var o,i=((o={})[r]=n,o);e.setState(ct[r]?i:{plugins:t({},e.state.plugins,i)},!0)},this.compiler=function(t,r){var n=e.compilerCallback,o=e;r(e,(function(e){n.call(o,t,e)}))},this.reportDebug=bt}var r=e.prototype;return r.$life=function(t){this.life=t},r._waitPromise=function(t){var e=this;if(!window.Promise)return ht("promisePolyfill",(function(){return e.init(t)})),!0},r._willMount=function(t){var e=this,r=t.plugins;this.$life(Z),l(this.willMount)&&this.willMount(t),this.plugins=r instanceof Array?r:[],kt.forEach((function(r){e[r]=[].concat(lt[r],t[r]||[])}))},r._didMount=function(){this.$life(tt),l(this.didMount)&&this.didMount()},r._checkSelf=function(){var t=this;return this.$life(et),new Promise((function(e,r){if(l(t.checkSelf))try{t.checkSelf()}catch(t){console.log("edith自检发生错误",t),gt("SelfCheckError",t),r(t)}e()}))},r._installPlugins=function(){var t=this;return new Promise((function(e,r){var n,o=[];t.plugins.forEach((function(t){if(t)if("string"==typeof t){var e=at[t];e&&o.push(e())}else o.push(t)})),(n=o,Promise.all(n.map((function(t){return t.catch?t.catch((function(t){return 0})):t})))).then((function(r){(r=r.map((function(t){return l(t.default)?new t.default:t}))).forEach((function(e){e&&kt.forEach((function(r){t[r]=[].concat(t[r],e[r]||[])}))})),t.plugins=r,e()}))}))},r._collecting=function(){var t=this;this.plugins.forEach((function(e){var r=e.constructor.name;if(!e.apply)return ct[e]||console.warn("Edith插件["+e.constructor.name+"]必须实现apply方法");try{e.apply(t.compiler.bind(t))}catch(e){gt("CollectError",{error:dt(e),plugin:r,life:t.life})}})),l(this.collecting)&&this.collecting()},r._sleep=function(){this.$life(it),this.$life=function(){},l(this.sleep)&&this.sleep(),this.$handleCollect=function(){}},r.$handleCollect=function(){var e=this;if(this.life===nt){this.$life(ot);var r=setTimeout((function(){var n=t({},e.state),o={name:n.name,message:n.message,url:n.url,title:n.title,ajax:n.extraInfo||{url:""},target:n.target||{}};e.filters(o)&&"customError"!==n.type||(e._collecting(),e.reportDebug(t({},e.state,{plugins:vt(pt(e.state.plugins))}))),e.state=e.initState,e.$life(nt),window.clearTimeout(r),r=null}),16)}},e}();function Ct(){!function(){if(l(t))return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}t.prototype=Event.prototype,window.CustomEvent=t}()}!function(){var t=this;window.Promise||function(t,e,r){void 0===r&&(r=function(){});var n=document.createElement("script");n.setAttribute("cdn-rendered",""),n.src=t,n.onload=e,n.onerror=r,document.getElementsByTagName("head")[0].appendChild(n)}("//webcdn.inke.cn/tpc/common/es6-promise/3.2.2/es6-promise.min.js",(function(){c.call(t,"promisePolyfill")}))}(),function(){var t=WebSocket;if(t){var e={open:"webSocketOpen",error:"webSocketError",close:"webSocketClose"};WebSocket=function(r,n){var o=new t(r,n);return o.startTime=a(),c.call(o,"webSocketStart"),Object.keys(e).forEach((function(t){o.addEventListener(t,(function(r){c.call(this,e[t])}),!1)})),o}}}();var xt=new(function(r){var o,i;function s(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))||this).silentDev=!1,e.silentPromise=!1,e.silentWebsocket=!1,e.silentResource=!1,e.silentHttp=!1,e.setHttpBody=!1,e.version="0.4.6",e.handleError=function(r){if(r=e.errorHandleFunc[r.type](r)){var n=g(r);e.life===nt&&(e.setState(t({},e.state,n)),e.$handleCollect())}},e.handlePromise=function(r,n){var o=e.utils.tryCatchFunc,i=setTimeout(o((function(){var n=r.reason;r.message="[object Error]"===Object.prototype.toString.call(n)?n.toString():dt(n),r.name="unhandledrejection",r._type="error";var o=g(r);e.setState(t({},e.state,o)),clearTimeout(i),e.$handleCollect()})),500);window.onrejectionhandled=o((function(t,e){n===e&&i&&clearTimeout(i)}))},e.errorHandleFunc={webSocketError:function(t){t.name="webSocketError",t._type="webSocketError";var r=t.detail.target||t.detail.currentTarget,n=r.url,o=r.startTime,i=r.openTime;if(!d(e.ajaxWhiteList,n))return t.extraInfo={url:n,elapsedTime:a()-(i||o)},t},resourceError:function(t){if(!e.silentResource){var r=t.target,n=m(r).toLowerCase(),o="";if(o="link"===n?r.href:r.src,!d(e.resourceWhiteList,o))return o.split("?")[0]===location.href.split("?")[0]&&(o=""),t.message=o,t.name=t._type="resourceError",t._target={tagName:n,className:r.className,id:r.id,outerHTML:e.utils.getSimpleString(r.outerHTML),xPath:f(r)},t}},ajaxError:function(t){t._type="httpError",t.name="ajaxError";var r=t.detail,n=r.target,o=r.time,i=n.method,a=n.url,s=n.startTime,u=n.responseText,c=n.statusText,l=n.status;if(!d(e.ajaxWhiteList,a))return t.extraInfo={elapsedTime:o-s,responseText:u,status:l,statusText:c,method:i,url:a},e.setHttpBody&&(t.extraInfo.body=n.body),t},fetchError:function(r){var n=r.detail,o=n.target.options,i=n.time;if(!d(e.ajaxWhiteList,o.url))return r._type="httpError",r.name=r.message="fetchError",r.error=r.detail,r.extraInfo=t({elapsedTime:i-o.startTime},o),e.setHttpBody||delete r.extraInfo.body,r},error:function(t){return t.target!==window?e.errorHandleFunc.resourceError(t):t}},e}i=r,(o=s).prototype=Object.create(i.prototype),o.prototype.constructor=o,e(o,i);var c=s.prototype;return c.willMount=function(e){var r=this;for(var n in e)void 0===e[n]||l(this[n])||"version"===n||(this[n]=e[n]);var o=function(t){return ft(t,r)};this.utils=t({},this.utils,{getCurrentTime:a,getSimpleString:h,tryCatchFunc:o}),this.filters=e.filters&&o(e.filters)},c.didMount=function(){Ct()},c.checkSelf=function(){this.handleError({type:"error",target:window}),this.silentResource||this.handleError({type:"error",target:{src:"",tagName:"a",outerHTML:"",parentNode:document}}),this.silentHttp||this.handleError({type:"ajaxError",detail:{target:{url:""}}}),this.silentHttp||this.handleError({type:"fetchError",detail:{target:{options:{url:""}}}})},c.pluginInstalled=function(){this.notListening||(!function(){for(var t,e=n(document.getElementsByTagName("script"));!(t=e()).done;){var r=t.value,o=p(r.src||"");o&&"/"!==o[0]&&r.setAttribute("crossorigin","anonymous")}}(),ht("error",this.handleError,!0),this.silentPromise||ht("unhandledrejection",this.handlePromise),this.silentHttp||ht("ajaxError",this.handleError),this.silentHttp||ht("ajaxTimeout",this.handleError),this.silentHttp||ht("fetchError",this.handleError),this.silentWebsocket||ht("webSocketError",this.handleError))},c.debug=function(e,r){this.setState(t({},this.state,g({name:dt(e),message:dt(r),timeStamp:u(),type:"customError"}))),this.$handleCollect()},c._changeReportUrl=function(t){t&&(this.ajaxWhiteList.push(t),this.reportDebug=wt.post(t+""))},s}(Tt));export{xt as E,t as _,u as a,f as b,s as c,d,c as e,m as g,v as i};
//# sourceMappingURL=index-3e14eaf0.js.map
