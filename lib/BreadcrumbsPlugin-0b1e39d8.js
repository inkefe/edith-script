import{i as e,e as t,g as i,a,b as n,_ as r,c as d,d as o}from"./index-3e14eaf0.js";var s={},m=e(),l=[],h=[];function c(e,t){var i=-1;if(t.forEach((function(t,a){e.eid&&t.eid===e.eid&&-1===i&&(i=a)})),i>=0)return t.splice(i,1,r({},t[i],e));t.length>=15&&t.shift(),t.push(r({eid:d()},e))}var p=function(e){return function(t){c({type:"navigation",time:s.getCurrentTime(),method:e||t.detail.method,timeStamp:a(),detail:{from:{url:s.getSimpleString(t.oldURL||t.detail.oldURL),title:document.title},to:{url:s.getSimpleString(t.newURL||t.detail.newURL)}}},h)}},u=function(e,t){void 0===t&&(t="XMLHttpRequest");var i=e.method,a=e.status,n=e.statusText,r=e.responseURL,d=e.url,m=e.body,p=void 0===m?null:m,u=e.endTime,f=e._eid,S=e.timeStamp,v=e.startTime,g=u-v;o(l,d)||c({eid:f,type:t,time:v,timeStamp:S,elapsedTime:g,detail:{method:i,status:a,body:p,statusText:n,url:s.getSimpleString(r||d,150)}},h)},f=function(){var e=function(e,t){return function(i){var n,r=i.detail,o=r.target,s=r.time,m="open"===e;o._eid=m&&!t&&o._eid?o._eid:d(),o.openTime=o.openTime||(t?0:s),o.time=m&&o.time||s,o.startTime=t?s:o.startTime,o.elapsedTime=m?s-o.startTime:s-(o.openTime||o.startTime),o.timeStamp=o.timeStamp||a(),(n=e,function(e){var t=e._eid,i=e.time,a=e.elapsedTime,r=e.url,d=e.readyState;c({eid:t,type:"webSocket",time:i,timeStamp:e.timeStamp,method:n,elapsedTime:a,detail:{url:r,readyState:d}},h)})(o)}};s.edithAddEventListener("webSocketStart",e("open",!0)),s.edithAddEventListener("webSocketOpen",e("open")),s.edithAddEventListener("webSocketClose",e("close"))},S=function(){var e,t;if(s.edithAddEventListener("click",(e="click",function(t){var r=t.target,d=i(r).toLowerCase(),o=r.className,m=r.id,l=s.getSimpleString(r.outerHTML);c({type:e,time:s.getCurrentTime(),timeStamp:a(),detail:{className:o,id:m,outerHTML:l,tagName:d,xPath:n(r)}},h)}),!0),t=function(e){var t=e.detail,i=t.target,n=t.time;i._eid=i._eid||d(),i.timeStamp=i.timeStamp||a(),i.endTime=n,u(i)},s.edithAddEventListener("ajaxOpen",t),s.edithAddEventListener("ajaxProgress",t),s.edithAddEventListener("ajaxLoadEnd",t),function(){var e=function(e){var t=e.detail,i=t.target.options,n=t.time;i.timeStamp=i.timeStamp||a();var d=r({},i,e.detail,{endTime:n});u(d,"fetchRequest")};s.edithAddEventListener("fetchStart",e),s.edithAddEventListener("fetchEnd",e)}(),f(),m){var o=location.href;setInterval((function(){o!=location.href&&(p("intervalCheck")({oldURL:o,newURL:location.href,timeStamp:a()}),o=location.href)}),250)}else s.edithAddEventListener("hashchange",p("hashchange")),s.edithAddEventListener("navigationChange",p())},v=function(){function e(e){this.name="breadcrumbs",this.state={}}return e.prototype.apply=function(e){var i=this;e(this.name,(function(e,a){var n=e.state,r=e.ajaxWhiteList,d=e.utils;s=d,n[i.name]||(l=r,function(){function e(e,i){return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return n[2]&&i&&t.call({oldURL:location.href,newURL:n[2],method:e},"navigationChange"),i.apply(this,n)}}!history.replaceState&&history.pushState||(history.pushState=e("pushState",history.pushState),history.replaceState=e("replaceState",history.replaceState))}(),S()),a(s.compressData(h))}))},e}();export default v;
//# sourceMappingURL=BreadcrumbsPlugin-0b1e39d8.js.map
